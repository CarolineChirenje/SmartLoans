@model IEnumerable<SmartDomain.NoticeBoard>
@using SmartHelper;
@{
    ViewData["Title"] = "NoticeBoard";
}

@{
    ViewBag.Title = "Panels";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Notice Board</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>


@if (Model != null)
{

    IEnumerable<SmartDomain.NoticeBoard> notices = ViewBag.Notices as IEnumerable<SmartDomain.NoticeBoard>;

    int? noticesCount = notices?.Count();
    int take = 3;
    @if (!noticesCount.HasValue)
    {
        return;
    }
    @if (noticesCount == 0)
    {
        return;
    }
    @if (noticesCount == 1)
    {
        take = 1;
    }
    @for (int count = 0; count < notices.Count(); count += take)
    {
        var subItems = notices.Skip(count).Take(take).ToList();


        int subCount = 0;
        @foreach (var item in subItems)
        {
            @if (count % 1 == 0)
            {
                
                <!-- /.row -->
                <div class="row">
                    <div class="col-lg-4">
                      
                            <div class="@UtilityService.GetPanelColor(count)">
                                <div class="panel-heading">
                                    <a asp-controller="NoticeBoard" asp-action="ViewNotice" asp-route-id="@item.NoticeID">@item.Title</a>
                                </div>
                                <div class="panel-body">
                                    <p> @item.Details</p>
                                </div>
                                <div class="panel-footer">
                                    @item.PriorityRank.Name
                                </div>
                            </div>
                        </div>
                 
                   @if (count % 2 == 0)
                    {
                       
                        <div class="col-lg-4">
                            <div class="panel panel-warning">
                                <div class="panel-heading">
                                    <a asp-controller="NoticeBoard" asp-action="ViewNotice" asp-route-id="@item.NoticeID">@item.Title</a>
                                </div>
                                <div class="panel-body">
                                    <p> @item.Details</p>
                                </div>
                                <div class="panel-footer">
                                    @item.PriorityRank.Name
                                </div>
                            </div>
                        </div>
                    }
                    @if (count % 3 == 0)
                    {
                        subCount++;
                        <div class="col-lg-4">
                            <div class="panel panel-danger">
                                <div class="panel-heading">
                                    <a asp-controller="NoticeBoard" asp-action="ViewNotice" asp-route-id="@item.NoticeID">@item.Title</a>
                                </div>
                                <div class="panel-body">
                                    <p> @item.Details</p>
                                </div>
                                <div class="panel-footer">
                                    @item.PriorityRank.Name
                                </div>
                            </div>
                        </div>
                    }
                </div>
                count +=  take;
            }
        }
    }
}


