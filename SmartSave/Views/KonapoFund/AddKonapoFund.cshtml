@model SmartDomain.KonapoFund
@using SmartHelper;

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Konapo Fund
    </h1>
</section>
<!-- Main content -->
<section class="content container-fluid">
    <!-- Horizontal Form -->
    <div class="box box-info">
        <div class="box-header with-border">
            <h3 class="box-title">Add Konapo Fund</h3>
        </div>
        <!-- /.box-header -->
        <!-- form start -->
        <form class="form-horizontal" method="post" action="AddKonapoFund">

            @if (TempData["Error"] != null)
            {<div class="container">
                    <div class="text-danger">@TempData["Error"].ToString()</div>
                </div>
                <br />
            }
            <div class="container">
                @Html.ValidationSummary(false, "", new { @class = "text-danger" })
            </div>

            @if (TempData["Success"] != null)
            {<div class="container">
                    <div class="text-success">@TempData["Success"].ToString()</div>
                </div>
            }
            @if (TempData["Warning"] != null)
            {<div class="container">
                    <div class="text-warning">@TempData["Warning"].ToString()</div>
                </div>
            }
            <div class="container">
                <div class="text-danger">Processing of a Fund might Take a While.Make sure all required Categories and Fund Items are active on selected Fund</div>
            </div>
            <br />
            <div class="box-body">

                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-2 control-label">Employee Details</label>
                    <div class="col-sm-10">
                        <select asp-for="ClientID" id="ClientID" class="form-control" asp-items="ViewBag.ClientList">
                            <option value="">--- Select Employee ---</option>
                        </select>

                    </div>
                </div>
                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-2 control-label">Fund Name</label>
                    <div class="col-sm-10 ">
                        <input type="text" class="form-control .ui-front" id="FundName" name="Name" placeholder=" Name" required>
                        <input type="hidden" id="FundID" name="FundID" />
                    </div>
                </div>



                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-2 control-label">Status</label>
                    <div class="checkbox">
                        <label class="checkbox-inline">
                            <input type="checkbox" data-val="true" id="IsActive"
                                   name="IsActive" value="true">
                        </label>
                    </div>
                </div>
            </div>
            <!-- /.box-body -->
            <div class="box-footer">
                <a class="btn btn-default" asp-controller="KonapoFund" asp-action="KonapoFunds">Cancel</a>
                @if (UtilityService.HasPermission(Permissions.Add_Fund_Item))
                {
                    <button type="submit" class="btn btn-info pull-right">
                        Add
                    </button>}
            </div>
            <!-- /.box-footer -->
        </form>
    </div>
    <!-- /.box -->
</section>
<style type="text/css">
    .ui-front {
        z-index: 100 !important;
    }
</style>
<script>

  
    $(document).ready(function () {
        $("#FundName").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/KonapoFund/FundSearch/',
                    data: { "prefix": request.term },
                    type: "POST",
                    success: function (data) {
                        response($.map(data, function (item) {
                            //console.log("Returned Response");
                            //console.log(item);
                            console.log(item.name);
                            return {
                                label: item.name,
                                val: item.id
                            }
                         
                        }))
                    },
                    error: function (response) {
                        alert(response.responseText);
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    }
                });
            },
            select: function (e, i) {
                console.log("Selected Value");
                console.log(i.item);
                $("#FundID").val(i.item.val);
              //  $("#FundName").text(i.item.name);
            },
            minLength: 2

        });
    });

</script>